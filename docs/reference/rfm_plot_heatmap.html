<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The heat map shows the average monetary value for different
  categories of recency and frequency scores. Higher scores of frequency and
  recency are characterized by higher average monetary value as indicated by
  the darker areas in the heatmap."><title>RFM heatmap — rfm_plot_heatmap • rfm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="RFM heatmap — rfm_plot_heatmap"><meta property="og:description" content="The heat map shows the average monetary value for different
  categories of recency and frequency scores. Higher scores of frequency and
  recency are characterized by higher average monetary value as indicated by
  the darker areas in the heatmap."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- dependencies from examples --><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.2/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet"><script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet"><script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rfm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">Home</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-guides">Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-guides">
    <a class="dropdown-item" href="../articles/rfm-customer-level-data.html">RFM - Customer Level Data</a>
    <a class="dropdown-item" href="../articles/rfm-transaction-level-data.html">RFM - Transaction Level Data</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <a class="external-link dropdown-item" href="https://blog.rsquaredacademy.com/customer-segmentation-using-rfm-analysis/">Blog</a>
    <a class="external-link dropdown-item" href="https://blog.rsquaredacademy.com/rfm-0-2-1/">Version 0.2.1</a>
    <a class="external-link dropdown-item" href="https://blog.rsquaredacademy.com/introducing-rfm/">Version 0.2.0</a>
    <a class="dropdown-item" href="../news/index.html">Change log</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rsquaredacademy/rfm">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>RFM heatmap</h1>
      <small class="dont-index">Source: <a href="https://github.com/rsquaredacademy/rfm/blob/HEAD/R/rfm-plots.R" class="external-link"><code>R/rfm-plots.R</code></a></small>
      <div class="d-none name"><code>rfm_plot_heatmap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The heat map shows the average monetary value for different
  categories of recency and frequency scores. Higher scores of frequency and
  recency are characterized by higher average monetary value as indicated by
  the darker areas in the heatmap.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">rfm_plot_heatmap</span><span class="op">(</span>
  <span class="va">data</span>,
  package <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, <span class="st">"plotly"</span><span class="op">)</span>,
  brewer_n <span class="op">=</span> <span class="fl">5</span>,
  brewer_name <span class="op">=</span> <span class="st">"PuBu"</span>,
  xaxis_label <span class="op">=</span> <span class="cn">NULL</span>,
  yaxis_label <span class="op">=</span> <span class="cn">NULL</span>,
  plot_title <span class="op">=</span> <span class="cn">NULL</span>,
  legend_title <span class="op">=</span> <span class="cn">NULL</span>,
  print_plot <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>An object of class <code>rfm_table</code>.</p></dd>


<dt>package</dt>
<dd><p>Visualization engine. Choose between <code>ggplot2</code>
and <code>plotly</code>.</p></dd>


<dt>brewer_n</dt>
<dd><p>Indicates the number of colors in the palette; RColorBrewer
is used for the color palette of the heatmap; check the documentation of
<code>brewer.pal</code>.</p></dd>


<dt>brewer_name</dt>
<dd><p>Palette name; check the documentation of
<code>brewer.pal</code>.</p></dd>


<dt>xaxis_label</dt>
<dd><p>X axis label.</p></dd>


<dt>yaxis_label</dt>
<dd><p>Y axis label.</p></dd>


<dt>plot_title</dt>
<dd><p>Title of the plot.</p></dd>


<dt>legend_title</dt>
<dd><p>Legend title.</p></dd>


<dt>print_plot</dt>
<dd><p>logical; if <code>TRUE</code>, prints the plot else returns a
plot object.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="deprecated-functions">Deprecated Functions<a class="anchor" aria-label="anchor" href="#deprecated-functions"></a></h2>
    

<p><code>rfm_heatmap()</code> has been deprecated and will be made defunct. It has
been provided for compatibility with older versions only, and will be made
defunct at the next release.</p>
<p>Instead use the replacement function <code>rfm_plot_heatmap()</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># using transaction data</span></span>
<span class="r-in"><span class="va">analysis_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2006-12-31'</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rfm_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="rfm_table_order.html">rfm_table_order</a></span><span class="op">(</span><span class="va">rfm_data_orders</span>, <span class="va">customer_id</span>, <span class="va">order_date</span>,</span>
<span class="r-in"><span class="va">revenue</span>, <span class="va">analysis_date</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># heat map</span></span>
<span class="r-in"><span class="co"># ggplot2</span></span>
<span class="r-in"><span class="fu">rfm_plot_heatmap</span><span class="op">(</span><span class="va">rfm_order</span><span class="op">)</span></span>
<span class="r-plt img"><img src="rfm_plot_heatmap-1.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># plotly</span></span>
<span class="r-in"><span class="fu">rfm_plot_heatmap</span><span class="op">(</span><span class="va">rfm_order</span>, <span class="st">"plotly"</span><span class="op">)</span></span>
<div id="htmlwidget-d02842472cdf4beddfe1" style="width:700px;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d02842472cdf4beddfe1">{"x":{"visdat":{"1f7c1e6179d0":["function () ","plotlyVisDat"]},"cur_data":"1f7c1e6179d0","attrs":{"1f7c1e6179d0":{"x":{},"y":{},"z":{},"colorbar":{"title":"Mean Monetary Value"},"hoverinfo":"text","hovertext":["Frequency Score: 1<br />Recency Score: 1<br />Mean Monetary Value: 208.4","Frequency Score: 1<br />Recency Score: 2<br />Mean Monetary Value: 246.98","Frequency Score: 1<br />Recency Score: 3<br />Mean Monetary Value: 246.3","Frequency Score: 1<br />Recency Score: 4<br />Mean Monetary Value: 213.42","Frequency Score: 1<br />Recency Score: 5<br />Mean Monetary Value: 262.17","Frequency Score: 2<br />Recency Score: 1<br />Mean Monetary Value: 380.5","Frequency Score: 2<br />Recency Score: 2<br />Mean Monetary Value: 407.54","Frequency Score: 2<br />Recency Score: 3<br />Mean Monetary Value: 355.08","Frequency Score: 2<br />Recency Score: 4<br />Mean Monetary Value: 375.17","Frequency Score: 2<br />Recency Score: 5<br />Mean Monetary Value: 370.03","Frequency Score: 3<br />Recency Score: 1<br />Mean Monetary Value: 530.24","Frequency Score: 3<br />Recency Score: 2<br />Mean Monetary Value: 516.65","Frequency Score: 3<br />Recency Score: 3<br />Mean Monetary Value: 446.61","Frequency Score: 3<br />Recency Score: 4<br />Mean Monetary Value: 451.88","Frequency Score: 3<br />Recency Score: 5<br />Mean Monetary Value: 467","Frequency Score: 4<br />Recency Score: 1<br />Mean Monetary Value: 575.41","Frequency Score: 4<br />Recency Score: 2<br />Mean Monetary Value: 599.47","Frequency Score: 4<br />Recency Score: 3<br />Mean Monetary Value: 603.79","Frequency Score: 4<br />Recency Score: 4<br />Mean Monetary Value: 617.07","Frequency Score: 4<br />Recency Score: 5<br />Mean Monetary Value: 564.51","Frequency Score: 5<br />Recency Score: 1<br />Mean Monetary Value: 746.67","Frequency Score: 5<br />Recency Score: 2<br />Mean Monetary Value: 873.11","Frequency Score: 5<br />Recency Score: 3<br />Mean Monetary Value: 846.9","Frequency Score: 5<br />Recency Score: 4<br />Mean Monetary Value: 866.43","Frequency Score: 5<br />Recency Score: 5<br />Mean Monetary Value: 862.4"],"colors":["#F1EEF6","#BDC9E1","#74A9CF","#2B8CBE","#045A8D"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"heatmap"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"RFM Heat Map","xaxis":{"domain":[0,1],"automargin":true,"title":"Frequency Score"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Recency Score"},"scene":{"zaxis":{"title":"monetary"}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"colorbar":{"title":"Mean Monetary Value","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(241,238,246,1)"],["0.0416666666666667","rgba(232,232,242,1)"],["0.0833333333333333","rgba(224,226,239,1)"],["0.125","rgba(215,219,235,1)"],["0.166666666666667","rgba(206,213,232,1)"],["0.208333333333333","rgba(198,207,228,1)"],["0.25","rgba(189,201,225,1)"],["0.291666666666667","rgba(178,196,222,1)"],["0.333333333333333","rgba(166,190,219,1)"],["0.375","rgba(154,185,216,1)"],["0.416666666666667","rgba(142,180,213,1)"],["0.458333333333333","rgba(129,174,210,1)"],["0.5","rgba(116,169,207,1)"],["0.541666666666667","rgba(106,164,204,1)"],["0.583333333333333","rgba(96,159,201,1)"],["0.625","rgba(85,154,199,1)"],["0.666666666666667","rgba(73,150,196,1)"],["0.708333333333333","rgba(60,145,193,1)"],["0.75","rgba(43,140,190,1)"],["0.791666666666667","rgba(38,131,182,1)"],["0.833333333333333","rgba(32,123,173,1)"],["0.875","rgba(27,115,165,1)"],["0.916666666666667","rgba(20,106,157,1)"],["0.958333333333333","rgba(13,98,149,1)"],["1","rgba(4,90,141,1)"]],"showscale":true,"x":[1,1,1,1,1,2,2,2,2,2,3,3,3,3,3,4,4,4,4,4,5,5,5,5,5],"y":[1,2,3,4,5,1,2,3,4,5,1,2,3,4,5,1,2,3,4,5,1,2,3,4,5],"z":[208.398230088496,246.981481481481,246.3,213.41935483871,262.166666666667,380.5,407.538461538462,355.083333333333,375.166666666667,370.027777777778,530.24,516.648648648649,446.608695652174,451.878787878788,467,575.409090909091,599.470588235294,603.785714285714,617.071428571429,564.508474576271,746.666666666667,873.105263157895,846.904761904762,866.432432432432,862.4],"hoverinfo":"text","hovertext":["Frequency Score: 1<br />Recency Score: 1<br />Mean Monetary Value: 208.4","Frequency Score: 1<br />Recency Score: 2<br />Mean Monetary Value: 246.98","Frequency Score: 1<br />Recency Score: 3<br />Mean Monetary Value: 246.3","Frequency Score: 1<br />Recency Score: 4<br />Mean Monetary Value: 213.42","Frequency Score: 1<br />Recency Score: 5<br />Mean Monetary Value: 262.17","Frequency Score: 2<br />Recency Score: 1<br />Mean Monetary Value: 380.5","Frequency Score: 2<br />Recency Score: 2<br />Mean Monetary Value: 407.54","Frequency Score: 2<br />Recency Score: 3<br />Mean Monetary Value: 355.08","Frequency Score: 2<br />Recency Score: 4<br />Mean Monetary Value: 375.17","Frequency Score: 2<br />Recency Score: 5<br />Mean Monetary Value: 370.03","Frequency Score: 3<br />Recency Score: 1<br />Mean Monetary Value: 530.24","Frequency Score: 3<br />Recency Score: 2<br />Mean Monetary Value: 516.65","Frequency Score: 3<br />Recency Score: 3<br />Mean Monetary Value: 446.61","Frequency Score: 3<br />Recency Score: 4<br />Mean Monetary Value: 451.88","Frequency Score: 3<br />Recency Score: 5<br />Mean Monetary Value: 467","Frequency Score: 4<br />Recency Score: 1<br />Mean Monetary Value: 575.41","Frequency Score: 4<br />Recency Score: 2<br />Mean Monetary Value: 599.47","Frequency Score: 4<br />Recency Score: 3<br />Mean Monetary Value: 603.79","Frequency Score: 4<br />Recency Score: 4<br />Mean Monetary Value: 617.07","Frequency Score: 4<br />Recency Score: 5<br />Mean Monetary Value: 564.51","Frequency Score: 5<br />Recency Score: 1<br />Mean Monetary Value: 746.67","Frequency Score: 5<br />Recency Score: 2<br />Mean Monetary Value: 873.11","Frequency Score: 5<br />Recency Score: 3<br />Mean Monetary Value: 846.9","Frequency Score: 5<br />Recency Score: 4<br />Mean Monetary Value: 866.43","Frequency Score: 5<br />Recency Score: 5<br />Mean Monetary Value: 862.4"],"type":"heatmap","xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><span class="r-in"></span>
<span class="r-in"><span class="co"># using customer data</span></span>
<span class="r-in"><span class="va">analysis_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2007-01-01'</span><span class="op">)</span></span>
<span class="r-in"><span class="va">rfm_customer</span> <span class="op">&lt;-</span> <span class="fu"><a href="rfm_table_customer.html">rfm_table_customer</a></span><span class="op">(</span><span class="va">rfm_data_customer</span>, <span class="va">customer_id</span>,</span>
<span class="r-in"><span class="va">number_of_orders</span>, <span class="va">recency_days</span>, <span class="va">revenue</span>, <span class="va">analysis_date</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># heat map</span></span>
<span class="r-in"><span class="fu">rfm_plot_heatmap</span><span class="op">(</span><span class="va">rfm_customer</span><span class="op">)</span></span>
<span class="r-plt img"><img src="rfm_plot_heatmap-2.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://www.aravindhebbali.com" class="external-link">Aravind Hebbali</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

